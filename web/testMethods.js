import "dotenv/config";
import { readJSONFromFileAsync } from "./userStore.js";
import { Readable, pipeline } from "stream";
import fs from "fs";

export let legend;
export let modifiedText;
const MockGptResponse = true;
export const max_tokens = 1700;
let MockGptTurboPrompt = false;

const TestBullMqJobProcessFailure = false;
const TestNonNetWorkErrorOnChatGptTurboFailure = false;











// ChatGpt Function Inline Error Triggers
if (MockGptTurboPrompt) {
  MockGptTurboPrompt = "Tell me facts about ghosts using only 40 words";
}

export { MockGptTurboPrompt, MockGptResponse };


export const getLegend = (genLegend) => {
  if (!genLegend) {
    throw new Error("No legend", genLegend);
  }



  legend = JSON.parse(JSON.stringify(genLegend));

  const text  = replaceBracketContents(legend)
  writeJsonToFile("legendAndModifiedText.json", {text})
}


export function testBullMqJobProcessFailure() {
  if (TestBullMqJobProcessFailure) {
    throw new Error("Job processing failed");
  }
}




export function testNonNetWorkErrorOnChatGptTurboFailure() {
  if (TestNonNetWorkErrorOnChatGptTurboFailure) {
    throw Error("failed to process");
  }
}







export async function mockGptTurboResponse({
  shop,
  prompt,
  url,
  config,
  documentType,
  api,
  promptTokenCountEstimate,
  processFunction,
}) {
  if (MockGptResponse) {
    const storeData = await readJSONFromFileAsync(shop);
   const {text} = readJsonFile("legendAndModifiedText.json")
    const sampleTexts = [text.split("").map((item) => `${item}`)].flat(
      Infinity
    );
    const responseStream = createChatGptTurboResponse(sampleTexts);
    return {
      stream:responseStream,
      documentType,
      [documentType]: storeData.gptText,
      ...arguments[0],
    };
  } else {
    return false;
  }
}



function createChatGptTurboResponse(texts) {
  let currentIndex = 0;

  return new Readable({
    objectMode:true,
    async read() {
      if (currentIndex >= texts.length) {
        // When there's no more data, push null to signal the end of the stream
        this.push(null);
        return;
      }

      // Simulate some delay before sending the next message
    try{
      await new Promise((resolve) => setTimeout(resolve, 5));
    }catch(e){
      console.log('error: ', e);
    }
      // Create a message similar to what you'd get from chatgptturbo
     try{
      const message = {
        choices: [
          {
            index: currentIndex,
            delta: {
              content: texts[currentIndex++],
            },
            "finish_reason": (currentIndex > (texts.length -1)) ?  "length" : "",
            usage: {
              "total_tokens": texts[currentIndex - 1].split(" ").length,
            },
          },
        ],
      };

// console.log('text: ',currentIndex,"text: ",  texts.length)
//  console.log('message----->: ',JSON.stringify(message) )
      // Push the message to the stream
      this.push(message) ;
    }catch(e){
      console.log('error: ',e);
    }
    },
  });
}






function replaceBracketContents(legend) {
  if (!Array.isArray(legend)) {
    throw new Error(
      "Invalid input. sampleText must be a string, and legend must be an array."
    );
  }
const sampleText = [`Introducing the VANS ERA 59 MOROCCAN GEO/DRESS BLUES, a shoe that embodies both style and functionality. This collection is specifically designed for men (collection: MEN - #de3fde), catering to their unique fashion needs. With its trendy design and comfortable fit, these shoes are perfect for the summer season (tag: summer - #bfeb66). \n\nThe VANS ERA 59 MOROCCAN GEO/DRESS BLUES collection (collection name: VANS - #e7b079) is a true representation of innovation and modernity. The nature_preserving_3_.jpg image (image:nature_preserving_3_.jpg - #6be1a6) perfectly captures the essence of this collection. The vibrant colors and intricate patterns make these shoes stand out from the crowd.\n\nOne of the key features of this collection is its carbon_neutral_1_.jpg image (image:carbon_neutral_1_.jpg - #2d82d7), which showcases VANS' commitment to sustainability. These shoes are made using eco-friendly materials, ensuring that your fashion choices contribute to a greener future.\n\nWhen it comes to quality and durability, the dependable_2_.jpg image (image:dependable_2_.jpg - #8f46d8) speaks volumes. These shoes are built to last, with superior craftsmanship and attention to detail. You can rely on them to withstand the test of time and keep you looking stylish.\n\nThe innovative_0_.jpg image (image:innovative_0_.jpg - #e86dab) perfectly captures the spirit of this collection. These shoes are not just about style, but also about pushing boundaries and embracing new trends. With their unique design elements and cutting-edge technology, they are sure to make a statement wherever you go.\n\nIn terms of style, the modern_4_.jpg image (image:modern_4_.jpg - #f4854e) showcases the versatility of this collection. Whether you're dressing up for a formal occasion or going for a casual look, these shoes can effortlessly elevate your outfit. They are the perfect blend of fashion and functionality.\n\nIn conclusion, the VANS ERA 59 MOROCCAN GEO/DRESS BLUES collection is a must-have for any fashion-forward man (tag: men - #e0b661). With its stylish design, eco-friendly materials, and superior craftsmanship, these shoes are a true representation of VANS' commitment to quality and innovation. Step into style with VANS (collection name: MEN - #94cc5c) and experience the perfect combination of comfort and fashion. (#dc3232)(#d5d548)(#6cef6c)(#33d7d7)(#2a2ad5)(#de3fde)(#e7b079)(#94cc5c)(#6be1a6)(#2d82d7)(#8f46d8)(#e86dab)(#f4854e)(#e0b661)(#bfeb66)(#a1dd83)`,`Introducing the VANS | OLD SKOOL (BUTTERFLY) TRUE WHITE | BLACK collection (#e7b079):\n\nIn today's fast-paced world, where style and comfort go hand in hand, VANS has once again delivered a masterpiece with their Old Skool Butterfly sneakers. These shoes are not just your ordinary footwear; they are a statement of individuality and self-expression. With their unique design and attention to detail, the Old Skool Butterfly sneakers are perfect for men (#49e9b4) who want to make a bold fashion statement this summer (#55b3e2).\n\nThe problem statement (#dc3232) that these sneakers address is the need for stylish yet comfortable footwear that can keep up with the demands of modern life. Whether you're running errands or hanging out with friends, these sneakers provide the perfect balance of style and functionality. The professional tone (#d5d548) used in the communication of this product emphasizes VANS' expertise and trustworthiness in delivering high-quality footwear.\n\nWith anaphora (#6cef6c), we can highlight the key features of the Old Skool Butterfly sneakers: versatility, durability, and timeless design. Versatility is at the core of these sneakers, as they can be paired with any outfit, from casual jeans to more formal attire. Their durability ensures that they will withstand the test of time, making them a long-lasting investment. And the timeless design guarantees that these sneakers will never go out of style.\n\nUsing chiasmus (#33d7d7), we can create a contrasting effect that captures users' attention: \"These sneakers are not just fashionable; they are fashion-forward.\" This reversal in the order of words emphasizes the unique and trendsetting nature of the Old Skool Butterfly sneakers.\n\nTo convey the exceptional qualities of these sneakers, we employ hyperbole (#2a2ad5): \"Experience unparalleled comfort like walking on clouds.\" This exaggerated statement showcases the superior comfort provided by the Old Skool Butterfly sneakers, making them a must-have for anyone seeking ultimate comfort in their footwear.\n\nLastly, we use metaphors (#de3fde) to create vivid images and deeper meanings: \"These sneakers are a butterfly that will elevate your style to new heights.\" This metaphor highlights the transformative power of these sneakers, elevating one's style and confidence.\n\nIncorporating the sizes 4 (#a051c8), 5 (#f33fb7), and 6 (#e2467a) into our stylistic paragraphs, we ensure that individuals of all sizes can enjoy the perfect fit and comfort offered by the Old Skool Butterfly sneakers.\n\n(image:pragmatic_-1_.jpg - #6be1a6)\n\nTo summarize, the VANS | OLD SKOOL (BUTTERFLY) TRUE WHITE | BLACK collection is a testament to VANS' commitment to delivering stylish and comfortable footwear. With their versatile design, durability, and timeless appeal, these sneakers are perfect for men (#49e9b4) looking to make a fashion statement this summer (#55b3e2). Experience unparalleled comfort and elevate your style with the Old Skool Butterfly sneakers from VANS (#cb3455)(#ca445b)(#cf6371)(#db3947).\n\n(Note: The response is within the token limit of 1700. Product-Details have been relaxed to maintain consistency and structure.)`,`(rhetorical: anaphora - #dc3232)\n\nIn the vast desert of footwear options, VANS | ERA 59 (DESERT COWBOY) stands tall as a true representation of style and comfort. With its unique collection name, VANS - #e7b079, this shoe embodies the spirit of adventure and individuality. VANS has always been synonymous with quality and innovation, and this collection is no exception. The men's tag - #e0b661 adds a touch of masculinity to the design, making it perfect for those who want to make a statement. Whether you're exploring the urban jungle or embarking on a summer escapade, these shoes are designed to keep up with your every step. The lightweight_1_.jpg image - #e86dab showcases the shoe's sleek and modern design, while the powerful_2_.jpg image - #8f46d8 highlights its durability and resilience. Available in sizes 10 - #49e9b4, 11 - #55b3e2, and 12 - #1a5fea, these shoes cater to individuals of all foot sizes. So why settle for ordinary when you can embrace extraordinary? Step into the world of VANS | ERA 59 (DESERT COWBOY) and let your feet do the talking. (VANS - #e7b079)(men - #e0b661)(summer - #bfeb66)(lightweight_1_.jpg - #e86dab)(powerful_2_.jpg - #8f46d8)(size: 10 - #49e9b4)(size: 11 - #55b3e2)(size: 12 - #1a5fea)`,`Introducing the VANS ERA 59 (DESERT COWBOY) collection: a stylish and versatile footwear option for men this summer. With its light brown color and sleek design, these shoes are perfect for those who want to make a fashion statement while staying comfortable. The environmentally conscious materials used in their production ensure that you can feel good about your purchase. \n\n(image:environmentally conscious_-1_.jpg - #e86dab)\n\nThe VANS ERA 59 (DESERT COWBOY) collection combines top-notch craftsmanship with an earth-friendly approach. Each pair is carefully crafted to provide the utmost comfort and durability, making them suitable for any occasion. Whether you're heading out for a casual day at the beach or a night out on the town, these shoes will keep you looking stylish and feeling confident.\n\n(image:top_notch_-1_.jpg - #f4854e)\n\nWith their compact design, these shoes are easy to pack and take with you wherever you go. Their symbiotic blend of style and functionality ensures that you'll always be ready for whatever the day brings. The adaptable nature of the VANS ERA 59 (DESERT COWBOY) collection allows you to effortlessly transition from day to night, making them a must-have addition to your wardrobe.\n\n(image:symbiotic_1_.jpg - #a1dd83)\n\nAvailable in sizes 9, 10, and 11, finding the perfect fit is a breeze. The light brown color adds a touch of sophistication to any outfit, making it easy to pair these shoes with your favorite summer ensembles. Whether you're going for a casual look or dressing up for a special occasion, the VANS ERA 59 (DESERT COWBOY) collection has got you covered.\n\n(color: light_brown - #c4df72)\n\n(image:compact_-1_.jpg - #bfeb66)\n\n(image:adaptable_2_.jpg - #43d674)\n\n(image:sleek_3_.jpg - #49e9b4)\n\nComplete your summer wardrobe with the VANS ERA 59 (DESERT COWBOY) collection. These shoes offer a unique value proposition, combining style, comfort, and sustainability in one package. Don't miss out on the opportunity to elevate your fashion game this season.\n\n(introduction: value proposition - #e7b079)\n\nSo why wait? Grab a pair of the VANS ERA 59 (DESERT COWBOY) shoes today and step into summer with confidence.\n\n(#55b3e2)(#1a5fea)(#804aed)(#f33fb7)(#e2467a)(#d75f37)(#c4df72)(#2bde58)(#67c9e9)(#4a14eb)(#bb73d3)`,`Introducing the VANS Classic Slip-On (Perforated Suede), a shoe that combines style and comfort for the modern individual. With its distinctive collection name, VANS, these slip-on shoes are perfect for men who want to make a fashion statement this summer. The beige color of these shoes (#e2467a) adds a touch of elegance to any outfit, making them versatile and suitable for various occasions. Made with perforated suede material, these shoes offer breathability and durability, ensuring long-lasting comfort throughout the day. Whether you're going for a casual stroll or attending a social gathering, the VANS Classic Slip-On is the perfect choice to elevate your style game. So why wait? Step into fashion-forward footwear with VANS Classic Slip-On (Perforated Suede). (#ecb86a)(#94cc5c)(#43d674)(#49e9b4)(#1a5fea)(#804aed)(#a051c8)(#e2467a)\n\nPicture yourself walking down the street on a warm summer day, feeling relaxed and comfortable in your VANS Classic Slip-On (Perforated Suede) shoes. These stylish slip-ons are designed with an informal tone (#d5d548) that resonates with the laid-back vibe of summer. The narrative-style storytelling (#e7b079) engages viewers by sharing captivating stories that leave them wanting more. Imagine swiping through short tales filled with cliffhangers, eagerly awaiting the next part of the story. This engaging format keeps you hooked while showcasing the unique features and benefits of these slip-on shoes. With their breathable perforated suede material and versatile beige color (#e2467a), these shoes are not only fashionable but also practical for those hot summer days. Get ready to step into a world of comfort and style with VANS Classic Slip-On (Perforated Suede). (#ecb86a)(#94cc5c)(#d5d548)(#e7b079)(#e2467a)\n\nThe VANS Classic Slip-On (Perforated Suede) collection (#94cc5c) is all about addressing the problem of finding comfortable yet stylish shoes for men. These slip-ons are specifically designed to provide a solution to this need. The informal tone (#d5d548) used in communicating the product's features and benefits creates a relaxed and conversational style that resonates with the target audience. By employing rhetorical techniques such as anaphora (#6cef6c), chiasmus (#33d7d7), hyperbole (#2a2ad5), and metaphor (#de3fde), the narrative-style information adds a strong and distinguishable effect to the stylistic-paragraphs, making them stand out among others. Imagine slipping into these shoes and experiencing unparalleled comfort while turning heads with your impeccable sense of style. The VANS Classic Slip-On (Perforated Suede) collection is not just a pair of shoes; it's a statement of confidence and individuality. Don't miss out on this opportunity to elevate your footwear game. Grab your pair today! (#ecb86a)(#94cc5c)(#dc3232)(#d5d548)(#6cef6c)(#33d7d7)(#2a2ad5)(#de3fde)\n\nWhen it comes to selecting the perfect size for your VANS Classic Slip-On (Perforated Suede), we've got you covered. Whether you prefer size 4 (#1a5fea), size 5 (#804aed), or size 6 (#a051c8), there's an option that will fit you perfectly. These sizes ensure a comfortable fit without compromising on style or functionality. The beige color option(#e2467a) adds a touch of sophistication to these slip-ons, making them suitable for various occasions. The price of $119.95 (#c9af5e) and the unique SKU code VN-09-beige-4 (#c4df72) make it easy to identify and purchase your desired size. Experience the perfect blend of style, comfort, and affordability with VANS Classic Slip-On (Perforated Suede). Don't settle for anything less than perfection when it comes to your footwear choices. Choose VANS Classic Slip-On (Perforated Suede) and step into a world of fashion-forward comfort. (#ecb86a)(#94cc5c)(#1a5fea)(#804aed)(#a051c8)(#e2467a)(#c9af5e)(#c4df72)\n\nIn conclusion, the VANS Classic Slip-On (Perforated Suede) collection is a must-have for men who value both style and comfort. With its distinctive collection name, VANS (#94cc5c), and an informal tone (#d5d548), these slip-on shoes are designed to address the problem of finding fashionable yet comfortable footwear. Through engaging storytelling format(#e7b079), rhetorical techniques such as anaphora (#6cef6c), chiasmus (#33d7d7), hyperbole (#2a2ad5), and metaphor (#de3fde) are employed to create a memorable impact on the audience. Available in sizes 4 (#1a5fea), 5 (#804aed), and 6 (#a051c8), these beige-colored shoes(#e2467a) offer versatility for various occasions. Priced at $119.95(#c9af5e) with a unique SKU code VN-09-beige-4(#c4df72), they provide both affordability and quality. Step into the world of fashion-forward comfort with VANS Classic Slip-On (Perforated Suede) and make a statement wherever you go. (#ecb86a)(#94cc5c)(#d5d548)(#e7b079)(#1a5fea)(#804aed)(#a051c8)(#e2467a)(#6cef6c)(#33d7d7)(#2a2ad5)(#de3fde)`,
  `Introducing the CONVERSE | CHUCK TAYLOR ALL STAR II HI, a shoe that embodies the essence of (CONVERSE - #dc3232) and is designed specifically for (MEN - #d5d548). With its sleek and timeless design, this shoe is perfect for any occasion, whether it's a casual day out or a night on the town.\n\n(image: functional_0_.jpg - #6cef6c)\n\nCrafted with the utmost attention to detail, the Chuck Taylor All Star II HI combines style and functionality seamlessly. Its durable construction ensures long-lasting wear, making it a reliable choice for those who value quality footwear. The black color option (#a1dd83) adds an air of sophistication while remaining versatile enough to pair with any outfit.\n\n(image: eco-friendly_1_.jpg - #33d7d7)\n\nBut what sets this shoe apart from others in its class is its commitment to being environmentally conscious. Made with eco-friendly materials, it minimizes its impact on the environment without compromising on style or comfort. It's a step towards sustainability that every fashion-forward individual can appreciate.\n\n(image: innovative_2_.jpg - #2a2ad5)\n\nInnovation lies at the heart of every Converse product, and the Chuck Taylor All Star II HI is no exception. Designed with cutting-edge technology, it offers unparalleled comfort and support. The cushioned insole provides all-day comfort, allowing you to stay on your feet without feeling fatigued. It's like walking on clouds (#6cef6c).\n\n(image: user-friendly_3_.jpg - #de3fde)\n\nNot only is this shoe innovative in terms of design and materials used but also in how user-friendly it is. The lace-up closure allows for a customizable fit, ensuring maximum comfort for every wearer. Whether you prefer a snug fit or a looser feel, these shoes can be adjusted to your liking. It's all about making the experience as comfortable and enjoyable as possible.\n\n(image: reliable_4_.jpg - #e7b079)\n\nWhen it comes to reliability, the Chuck Taylor All Star II HI exceeds expectations. With its high-quality craftsmanship and attention to detail, this shoe is built to withstand the test of time. The reinforced toe cap provides added durability, ensuring that these shoes will be with you every step of the way.\n\nNow available in sizes 4 (#e86dab), 5 (#f4854e), and 6 (#e0b661), there's a perfect fit for everyone. Whether you have smaller feet or need a larger size, Converse has got you covered. And with prices starting at $140.00 (#49e9b4) for size 4 in black, it's an investment worth making.\n\nSo why wait? Step into style and comfort with the CONVERSE | CHUCK TAYLOR ALL STAR II HI. Embrace the (tag: converse - #94cc5c) legacy while enjoying the benefits of a shoe designed specifically for (tag: men - #6be1a6). This summer (#2d82d7), make a statement with footwear that combines fashion-forward design, eco-friendly materials, innovative technology, and unbeatable reliability.\n\n(Product tags: converse - #94cc5c; men - #6be1a6; summer - #2d82d7)\n\n(Product variant options:\n- Size 4: /: black (price: $140.00 - #49e9b4)\n- Size 5: /: black (price: $140.00 - #1a5fea)\n- Size 6: /: black (price: $140.00 - #a051c8; inventory Quantity: 18 - #f33fb7)\n- Size 7: /: black (price: $140.00 - #d75f37; sku: C-02-black-7 - #c9af5e; inventory Quantity: 19 - #c4df72))\n\n(rhetorical techniques:\n1. anaphora - #dc3232\n2. chiasmus - #d5d548\n3. hyperbole - #6cef6c\n4. metaphor - #33d7d7\n5. simile - #2a2ad5)`,
  `(introduction: overview - #dc3232)\nThe CONVERSE | CHUCK TAYLOR ALL STAR II HI is a remarkable addition to the (CONVERSE - #dc3232) collection, specifically designed for (MEN - #d5d548) who seek both style and comfort. These iconic sneakers have been reimagined with innovative features that elevate them to new heights of performance and fashion.\n\n(tone: formal - #d5d548)\nWith a formal tone, we present to you the CONVERSE | CHUCK TAYLOR ALL STAR II HI, a shoe that embodies professionalism and precision. Crafted with meticulous attention to detail, these sneakers are built to impress.\n\n(narrative: foreshadowing - #6cef6c)\nAs you slip your feet into these shoes, you can't help but feel a sense of anticipation and excitement. Little do you know that the moment your foot touches the ground, you'll experience unparalleled comfort and support.\n\n(rhetorical: anaphora - #33d7d7)\nUser-friendly design. User-friendly functionality. The CONVERSE | CHUCK TAYLOR ALL STAR II HI is all about providing an exceptional user experience. With its sleek silhouette and carefully engineered construction, these shoes are truly a cut above the rest.\n\n(rhetorical: chiasmus - #2a2ad5)\nNot only do they offer cutting-edge style (#94cc5c), but they also boast cutting-edge technology. The CONVERSE | CHUCK TAYLOR ALL STAR II HI seamlessly combines fashion-forward aesthetics with advanced features that enhance your every step.\n\n(rhetorical: hyperbole - #de3fde)\nPrepare yourself for an extraordinary level of comfort like never before! The plush cushioning embraces your feet like a cloud, making each stride feel as if you're walking on air. It's like having your own personal foot spa wherever you go.\n\n(rhetorical: metaphor - #e7b079)\nThese sneakers are the epitome of luxury for your feet. The premium materials used in their construction ensure durability and long-lasting quality, making them a wise investment that will stand the test of time.\n\n(rhetorical: simile - #94cc5c)\nThe grip on these shoes is as reliable as a mountain climber's grip on a sheer cliff face. Whether you're navigating city streets or exploring rugged terrains, the CONVERSE | CHUCK TAYLOR ALL STAR II HI will keep you grounded and secure.\n\n(engagingFormats: textWithVisuals - #6be1a6)\n[Slide 1]\n(image: user-friendly_-1_.jpg - #6cef6c)\nWelcome to a world of comfort and style!\n\n[Slide 2]\n(image: sleek_-1_.jpg - #2a2ad5)\nExperience cutting-edge design and technology.\n\n[Slide 3]\n(image: high-quality_1_.jpg - #6be1a6)\nIndulge in luxurious materials and craftsmanship.\n\n[Slide 4]\n(image: compact_4_.jpg - #e86dab)\nConvenience at its finest – take them anywhere!\n\n[Slide 5]\n(image: affordable_-1_.jpg - #de3fde)\nLuxury doesn't have to break the bank!\n\nIn conclusion, the CONVERSE | CHUCK TAYLOR ALL STAR II HI is more than just a shoe; it's an experience. With its exceptional features, including user-friendly design (#33d7d7), cutting-edge technology (#94cc5c), and unparalleled comfort (#de3fde), these sneakers are perfect for any occasion. So why wait? Step into luxury with the CONVERSE | CHUCK TAYLOR ALL STAR II HI today! (price: 140.00 - #c63fa4)`,



`Introducing the VANS | SH-8 HI, a shoe that embodies the perfect blend of style and functionality. With its sleek design and innovative features, this shoe is a must-have for any fashion-forward individual. Whether you're strolling through the autumn leaves or enjoying a springtime adventure, these shoes will keep you looking sharp and feeling comfortable all day long.\n\n(image: premium_4_.jpg - #dc3232)\n\nCrafted with expertise and precision, the VANS | SH-8 HI is designed to meet the needs of men who value both fashion and practicality. Made from high-quality materials, these shoes are built to last, ensuring reliability that you can count on. The black variant adds a touch of sophistication to any outfit, making it suitable for both casual and formal occasions.\n\n(image: sophisticated_0_.jpg - #33d7d7)\n\nOne of the standout features of these shoes is their versatility. The VANS | SH-8 HI seamlessly transitions from season to season, making it an essential wardrobe staple. Whether you're pairing them with jeans in the autumn or shorts in the spring, these shoes will elevate your style game.\n\n(image: innovative_3_.jpg - #d5d548) (tag: spring - #94cc5c)\n\nNot only do these shoes look great, but they also offer unparalleled comfort. The cushioned insole provides support for your feet throughout the day, while the durable outsole ensures traction on various surfaces. Say goodbye to sore feet and hello to all-day comfort with the VANS | SH-8 HI.\n\n(image: reliable_1_.jpg - #2a2ad5) (tag: vans - #6be1a6)\n\nPriced at $129.95, these shoes offer incredible value for money. With their superior craftsmanship and attention to detail, they are worth every penny. Invest in a pair of VANS | SH-8 HI and experience the difference for yourself.\n\n(image: innovative_2_.jpg - #6cef6c) (price: 129.95 - #8f46d8) (sku: VN-07-black-4 - #e86dab)\n\nIn conclusion, the VANS | SH-8 HI is more than just a shoe; it's a statement piece that exudes confidence and style. With its professional tone, this shoe communicates expertise and trustworthiness. Embrace the unique value proposition of these shoes and elevate your fashion game to new heights with the VANS | SH-8 HI.\n\n(image: premium_4_.jpg - #dc3232)`,`Introducing the VANS | SH-8 HI, the ultimate footwear for men who want to make a statement. With its cutting-edge design and durable construction, these shoes are perfect for any season. Whether you're heading out for a casual stroll in the spring or embracing the autumn vibes, these VANS will keep you looking stylish and feeling comfortable all day long.\n\n(image: cutting-edge_3_.jpg - #6cef6c)\n\nAre you tired of sacrificing style for comfort? Well, look no further! The VANS | SH-8 HI combines both effortlessly. These shoes are part of the VANS collection (#dc3232), known for their iconic designs and high-quality craftsmanship. Made specifically for men (#d5d548), they offer a sleek and modern look that is sure to turn heads wherever you go.\n\n(image: compact_2_.jpg - #33d7d7)\n\nBut it's not just about looks; these shoes are built to last. The durable construction ensures that they can withstand even the toughest conditions. From rocky terrains to city streets, these shoes will be your reliable companion throughout your adventures.\n\n(image: durable_1_.jpg - #2a2ad5)\n\nNot only are they sturdy, but they also provide efficient performance. The high-top design offers ankle support and protection while adding an extra layer of style to your outfit. You'll feel like you're walking on clouds with every step you take.\n\n(image: efficient_0_.jpg - #de3fde)\n\nNow let's talk about colors! The VANS | SH-8 HI comes in a classic black shade (#a1dd83) that goes well with any outfit. It's versatile enough to be dressed up or down depending on the occasion, making it a must-have addition to your shoe collection.\n\nBut wait, there's more! We understand that everyone has different foot sizes, which is why we offer the VANS | SH-8 HI in three selectable sizes: 4 (#e86dab), 5 (#f4854e), and 6 (#e0b661). No matter your foot size, you can rock these shoes with confidence.\n\nNow, let's talk price. The VANS | SH-8 HI is priced at $129.95 (#49e9b4 for size 4, #1a5fea for size 5, and #a051c8 for size 6). With its exceptional quality and stylish design, it's worth every penny.\n\n(sku: VN-07-black-6 - #f33fb7)\n\nIn conclusion, the VANS | SH-8 HI is the perfect footwear choice for men who want to stand out from the crowd. With its cutting-edge design, durable construction, and efficient performance, these shoes are a true game-changer. So why settle for ordinary when you can have extraordinary? Step into style with VANS today!\n\n(value Proposition - #66ebca)\n\n(question Answer - #67c9e9)\n\n(informal - #2bde58)`,`Introducing the VANS | SH-8 HI, a shoe that combines history and innovation to create a truly remarkable product. With its roots dating back to the early days of skateboarding, VANS has become synonymous with style, durability, and versatility. The SH-8 HI is no exception, as it embodies all the qualities that have made VANS a trusted brand among skateboarders and fashion enthusiasts alike.\n\n(affordable_0_.jpg - #6cef6c)\nImagine yourself walking down the street on a crisp autumn day, leaves crunching beneath your feet. You look down and see the sleek silhouette of the VANS | SH-8 HI in black (black - #43d674), effortlessly blending into your outfit. Its premium suede upper gives it an air of sophistication while still maintaining its functional design (image: sleek_3_.jpg - #de3fde). The high-top construction provides ankle support and protection, making it perfect for any outdoor adventure or casual stroll through town.\n\n(men - #6be1a6)\nDesigned specifically for men (MEN - #d5d548), these shoes offer a comfortable fit without compromising on style. Whether you're heading out for a skate session or simply running errands around town, the SH-8 HI will keep you looking sharp and feeling confident.\n\n(innovative_1_.jpg - #33d7d7)\nBut what sets this shoe apart from others? It's the innovative features that make all the difference. The vulcanized rubber outsole ensures excellent grip and board feel, allowing you to perform tricks with ease (image: innovative_1_.jpg - #33d7d7). The padded collar provides added comfort and support during long hours of wear, making these shoes suitable for all-day use.\n\n(functional_2_.jpg - #2a2ad5)\nThe functionality of the SH-8 HI is further enhanced by its selectable sizes, ranging from 4 to 6 (4 - #f4854e, 5 - #e0b661, 6 - #bfeb66). This ensures that you can find the perfect fit for your feet, allowing for maximum comfort and performance. Additionally, the shoe comes in a classic black colorway (black - #43d674), making it versatile enough to pair with any outfit.\n\n(premium_4_.jpg - #e7b079)\nWith VANS' commitment to quality craftsmanship, you can trust that the SH-8 HI will withstand the test of time. Its premium materials and attention to detail ensure durability and longevity (image: premium_4_.jpg - #e7b079). These shoes are built to last, whether you're hitting the skate park or simply going about your daily routine.\n\n(price: 129.95 - #55b3e2)\nNow, let's address the elephant in the room – price. With all these incredible features packed into one shoe, you might expect it to come with a hefty price tag. However, VANS has managed to keep the SH-8 HI affordable without compromising on quality (price: 129.95 - #55b3e2). This makes it accessible to anyone who wants to experience the comfort and style that VANS has to offer.\n\nIn conclusion, the VANS | SH-8 HI is a testament to VANS' rich history and commitment to innovation. It combines functionality with style, offering a comfortable fit and durable construction. Whether you're a skateboarder looking for reliable footwear or a fashion enthusiast seeking a sleek addition to your wardrobe, these shoes have got you covered. So why settle for anything less when you can step up your game with VANS?`,`(overview - #f33fb7)\nIntroducing the VANS | SH-8 HI, a remarkable addition to the (VANS - #dc3232) collection specifically designed for (MEN - #d5d548) who appreciate style and functionality. These high-top sneakers are a testament to VANS' commitment to delivering top-notch footwear that combines comfort, durability, and fashion-forward design.\n\n(image: luxurious_1_.jpg - #2a2ad5)\nStep into luxury with the VANS | SH-8 HI. Crafted with meticulous attention to detail, these sneakers feature a sleek silhouette that exudes sophistication. The premium materials used in their construction ensure both durability and comfort, making them perfect for everyday wear or special occasions.\n\n(image: cutting-edge_2_.jpg - #de3fde)\nThe VANS | SH-8 HI is not just about looks; it also boasts cutting-edge technology that enhances performance. The lightweight construction (image: lightweight_3_.jpg - #e7b079) allows for effortless movement, while the practical design (image: practical_0_.jpg - #6be1a6) ensures maximum functionality. Whether you're exploring the city streets or hitting the skate park, these sneakers will keep up with your every step.\n\n(image: sleek_4_.jpg - #94cc5c)\nEmbrace the spirit of adventure with the VANS | SH-8 HI. Its sleek design and versatile color options make it a perfect companion for any season. From the vibrant hues of spring (spring - #e86dab) to the rich tones of autumn (autumn - #2d82d7), these sneakers effortlessly adapt to your style and surroundings.\n\nTo cater to different preferences, the VANS | SH-8 HI is available in various sizes and colors. For our (men - #8f46d8) customers, we offer the classic black variant (4: /: black) that adds a touch of sophistication to any outfit.\n\n(Price: 129.95 - #bfeb66)\nInvest in quality and style with the VANS | SH-8 HI. Priced at $129.95, these sneakers are worth every penny. The attention to detail, superior craftsmanship, and use of premium materials ensure that they will withstand the test of time.\n\n(Sku: VN-07-black-4 - #a1dd83)\nWith an inventory quantity of 18 (inventory Quantity: 18 - #43d674), the VANS | SH-8 HI is in high demand. Don't miss out on the opportunity to own a pair of these exceptional sneakers.\n\nIn conclusion, the VANS | SH-8 HI from the renowned (VANS - #6cef6c) collection is a must-have for any fashion-forward individual seeking comfort, durability, and style. Embrace your adventurous spirit and step into luxury with these cutting-edge sneakers. Trust in VANS' expertise and choose a brand that has been synonymous with quality for decades. Elevate your footwear game with the VANS | SH-8 HI today!`,`In the midst of a winter wonderland, where the air is crisp and the ground is blanketed in a pristine layer of snow, a group of men (men - #de3fde) embark on an adventure. Clad in their trusty PALLADIUM | PALLATECH HI TX | CHEVRON boots, they are ready to conquer any terrain that lies ahead.\n\nThese boots are not just your ordinary footwear; they are a symbol of durability and style. With their sleek design and practical features, they are the perfect companion for any winter expedition. The (image: functional_2_.jpg - #dc3232) image showcases their functionality, with a sturdy sole that provides excellent traction on slippery surfaces. No icy path or snowy slope can stand in the way of these boots.\n\nBut it's not just about functionality; these boots also make a fashion statement. The (image: sleek_3_.jpg - #d5d548) image captures their sleekness, with a chevron pattern that adds a touch of sophistication to any outfit. Whether trekking through the wilderness or strolling through the city streets, these boots will turn heads and garner compliments.\n\nThe PALLADIUM | PALLATECH HI TX | CHEVRON boots are more than just footwear; they are a metaphor for resilience and strength. Just like the men who wear them, these boots can withstand any challenge that comes their way. They are built to last, with high-quality materials that ensure longevity even in the harshest winter conditions.\n\nAnd let's not forget about comfort. The (image: practical_1_.jpg - #6cef6c) image showcases their practicality, with a padded collar and tongue that provide cushioning and support. These boots are designed to keep your feet warm and cozy, allowing you to focus on enjoying your winter adventures without any discomfort.\n\nWith their compact design and lightweight construction, the PALLADIUM | PALLATECH HI TX | CHEVRON boots are the perfect companion for any winter escapade. The (image: compact_0_.jpg - #33d7d7) image highlights their portability, making them easy to pack and carry wherever your journey takes you.\n\nSo, if you're looking for a pair of boots that combines style, functionality, and durability, look no further than the PALLADIUM | PALLATECH HI TX | CHEVRON. These boots are not just footwear; they are. DONE`,`Introducing  the  NIKE  |  SWOOSH  PRO  FLAT  PEAK  CAP,  the  perfect  accessory  for  those  who  want  to  add  a  touch  of  style  and  sophistication  to  their  everyday  look.  Made  with  high-quality  materials  and  designed  with  efficiency  in  mind,  this  cap  is  a  must-have  for  any  fashion-forward  individual.  \n\nImagine  yourself  strolling  down  the  street,  wearing  the  NIKE  |  SWOOSH  PRO  FLAT  PEAK  CAP.  The  sun  is  shining,  and  you  feel  confident  and  cool  as  you  sport  this  trendy  cap.  With  its  sleek  design  and  customizable  fit,  it's  like  having  a  personal  stylist  on  your  head.  (basic  introduction  -  #dc3232)\n\nThis  cap  is  not  just  any  ordinary  cap;  it's  a  statement  piece  that  showcases  your  unique  style.  With  its  flat  peak  and  the  iconic  NIKE  swoosh  logo,  it's  a  symbol  of  your  individuality  and  love  for  the  brand.  (basic  tone  -  #d5d548)\n\nBut  it's  not  just  about  style;  it's  about  functionality  too.  The  NIKE  |  SWOOSH  PRO  FLAT  PEAK  CAP  is  designed  to  provide  maximum  comfort  and  protection.  Made  with  high-quality  materials,  it  ensures  durability  and  long-lasting  wear.  ((high-quality_0_.jpg  -  #d2e7dd))\n\nWhat  sets  this  cap  apart  from  the  rest  is  its  customizable  fit.  With  an  adjustable  strap  at  the  back,  you  can  easily  find  the  perfect  fit  for  your  head.  Whether  you  prefer  a  snug  or  loose  fit,  this  cap  has  got  you  covered.  ((customizable_3_.jpg  -  #efd1f0))\n\nThe  NIKE  |  SWOOSH  PRO  FLAT  PEAK  CAP  comes  in  a  classic  white  color,  perfect  for  any  outfit  and  occasion.  Whether  you're  heading  to  the  gym  or  meeting  up  with  friends,  this  cap  will  effortlessly  elevate  your  look.  ((white  -  #f2edf4))\n\nSo  why  wait?  Step  up  your  cap  game  with  the  NIKE  |  SWOOSH  PRO  FLAT  PEAK  CAP.  It's  not  just  a  cap;  it's  a  fashion  statement,  an  egnition-sample-data  of  style  and  functionality.  Embrace  your  inner  fashionista  and  let  your  cap  do  the  talking.  ((cap  -  #eafdc8))  ((egnition-sample-data  -  #e3caed))  ((nike  -  #efe3ed))\n\nIn  a  world  where  fashion  is  constantly  evolving,  the  NIKE  |  SWOOSH  PRO  FLAT  PEAK  CAP  is  a  timeless  piece  that  will  never  go  out  of  style.  Don't  miss  out  on  this  opportunity  to  own  a  piece  of  fashion  history.  Get  yours  today  and  join  the  NIKE  revolution.  ((chiasmus  -  #f1f8e4))  ((hyperbole  -  #fcd3fb))  ((metaphor  -  #efd7ce))  ((simile  -  #c8e1fb))\n\nStatistics  show  that  those  who  wear  the  NIKE  |  SWOOSH  PRO  FLAT  PEAK  CAP  are  50%  more  likely  to  receive  compliments  on  their  style.  So  why  not  be  part  of  the  trend  and  turn  heads  wherever  you  go?  Upgrade  your  wardrobe  with  this  must-have  accessory  and  let  your  fashion  sense  shine.  ((statistics  -  #f3eaeb))\n\nGet  ready  to  take  your  style  to  new  heights  with  the  NIKE  |  SWOOSH  PRO  FLAT  PEAK  CAP.  It's  time  to  make  a  statement  and  show  the  world  your  unique  sense  of  fashion.  Don't  miss  out  on  this  opportunity  to  elevate  your  look  and  join  the  NIKE  family.  Order  yours  today  and  step  into  a  world  of  style  and  sophistication.  ((NIKE  -  #fce5fd))  ((casual  -  #f8d9d7))  ((storytelling  -  #f4eae9))  as  they  become  available,  creating  a  chat-like  experience.  In  this  blog,  we  will  explore  how  to  configure  and  implement  streaming  in  OpenAI's  chat  completions  API.  We  will  also  look  at  how  to  consume  these  streams  using  Node.js,  highlighting  the  differences  between  OpenAI's  streaming  API  and  standard  SSE.  Streaming  is  a  technique  that  allows  data  to  be  sent  and  received  incrementally,  without  waiting  for  the  entire  data  to  be  ready.  This  can  improve  performance  and  user  experience,  especially  for  large  or  dynamic  data. DONE`,`Introducing the NIKE | SWOOSH PRO FLAT PEAK CAP, the perfect accessory for those who want to add a touch of style and sophistication to their everyday look. Made with high-quality materials and designed with efficiency in mind, this cap is a must-have for any fashion-forward individual. \n\nImagine yourself strolling down the street, wearing the NIKE | SWOOSH PRO FLAT PEAK CAP. The sun is shining, and you feel confident and cool as you sport this trendy cap. With its sleek design and customizable fit, it's like having a personal stylist on your head. (sophisticated_.jpg - #facbfb)\n\nThis cap is not just any ordinary cap; it's a statement piece that showcases your unique style. With its flat peak and the iconic NIKE swoosh logo, it's a symbol of your individuality and love for the brand. (efficient_1_.jpg - #d3c7eb)\n\nBut it's not just about style; it's about functionality too. The NIKE | SWOOSH PRO FLAT PEAK CAP is designed to provide maximum comfort and protection. Made with high-quality materials, it ensures durability and long-lasting wear. (high-quality_0_.jpg - #d2e7dd)\n\nWhat sets this cap apart from the rest is its customizable fit. With an adjustable strap at the back, you can easily find the perfect fit for your head. Whether you prefer a snug or loose fit, this cap has got you covered. (customizable_3_.jpg - #efd1f0)\n\nThe NIKE | SWOOSH PRO FLAT PEAK CAP comes in a classic white color, perfect for any outfit and occasion. Whether you're heading to the gym or meeting up with friends, this cap will effortlessly elevate your look. (white - #f2edf4)\n\nSo why wait? Step up your cap game with the NIKE | SWOOSH PRO FLAT PEAK CAP. It's not just a cap; it's a fashion statement, an egnition-sample-data of style and functionality. Embrace your inner fashionista and let your cap do the talking. (cap - #eafdc8) (egnition-sample-data - #e3caed) (nike - #efe3ed)\n\nIn a world where fashion is constantly evolving, the NIKE | SWOOSH PRO FLAT PEAK CAP is a timeless piece that will never go out of style. Don't miss out on this opportunity to own a piece of fashion history. Get yours today and join the NIKE revolution. (chiasmus - #f1f8e4) (hyperbole - #fcd3fb) (metaphor - #efd7ce) (simile - #c8e1fb)\n\nStatistics show that those who wear the NIKE | SWOOSH PRO FLAT PEAK CAP are 50% more likely to receive compliments on their style. So why not be part of the trend and turn heads wherever you go? Upgrade your wardrobe with this must-have accessory and let your fashion sense shine. (statistics - #f3eaeb)\n\nGet ready to take your style to new heights with the NIKE | SWOOSH PRO FLAT PEAK CAP. It's time to make a statement and show the world your unique sense of fashion. Don't miss out on this opportunity to elevate your look and join the NIKE family. Order yours today and step into a world of style and sophistication. (NIKE - #fce5fd) (casual - #f8d9d7) (storytelling - #f4eae9) as they become available, creating a chat-like experience. In this blog, we will explore how to configure and implement streaming in OpenAI's chat completions API. We will also look at how to consume these streams using Node.js, highlighting the differences between OpenAI's streaming API and standard SSE. Streaming is a technique that allows data to be sent and received incrementally, without waiting for the entire data to be ready. This can improve performance and user experience, especially for large or dynamic data. [DONE]`, `Introduction:\n\nIn a world where fashion trends come and go, there is one iconic shoe that has stood the test of time - the VANS Authentic Lo Pro in Burgandy/White. This shoe is not just a fashion statement, but a symbol of individuality and self-expression. Let's dive into the statistics and engage in some fictional stories to truly understand the significance of this remarkable footwear.\n\nStatistics:\n\nAccording to recent fashion surveys, the VANS Authentic Lo Pro is one of the most sought-after shoes in the market. Its popularity has been steadily increasing, with sales skyrocketing by 30% in the past year alone (statistics - #d8ddf0). This remarkable growth can be attributed to its timeless design, exceptional quality, and the ability to cater to a wide range of personal styles.\n\nEngaging Formats:\n\nFictional Story 1: \"The Journey of a Dreamer\"\n\nOnce upon a time, in a small town, there lived a young dreamer named Lily. She had big aspirations and a burning desire to make her mark in the world. One day, as she was strolling through the local mall, she stumbled upon a pair of VANS Authentic Lo Pro in Burgandy/White. The moment she laid eyes on them, she knew they were meant for her. With their sleek design and vibrant color, they seemed to embody her spirit of adventure and creativity.\n\nFictional Story 2: \"The Dance of Colors\"\n\nIn a bustling city, a group of friends decided to start a dance crew. Each member had their own unique style and personality, but they all shared a common love for self-expression through movement. As they prepared for their first performance, they realized they needed a shoe that would not only provide comfort but also make a statement. That's when they discovered the VANS Authentic Lo Pro in Burgandy/White. The rich burgundy color perfectly complemented their vibrant personalities, while the white accents added a touch of elegance. With their feet clad in these stylish shoes, they took the stage by storm, captivating the audience with their mesmerizing dance moves.\n\nFictional Story 3: \"The Adventure Begins\"\n\nIn a world filled with monotony, a young traveler named Alex yearned for excitement and exploration. With a backpack slung over their shoulder and a map in hand, they set off on a journey to discover hidden gems around the globe. Along the way, they encountered diverse cultures, breathtaking landscapes, and unforgettable experiences. Through it all, their trusted companion was the VANS Authentic Lo Pro in Burgandy/White. These shoes not only provided comfort during long hikes and treks but also became a conversation starter, connecting Alex with fellow adventurers from all walks of life.\n\nConclusion:\n\nThe VANS Authentic Lo Pro in Burgandy/White is more than just a shoe; it is a symbol of individuality, creativity, and the courage to embrace one's true self. With its versatile design, comfortable fit, and vibrant color, it has become a favorite among dreamers, dancers, and adventurers alike. So, whether you're stepping onto the stage, embarking on a new journey, or simply expressing your unique style, let the VANS Authentic Lo Pro be your trusted companion (price 29.00 - #f7e2da) (sku vn-01-burgandy-4 - #d7f1d6) (quantity 17 - #e5ecf7). Choose your size (size 5 - #dfdfef) and join the countless individuals who have embraced this iconic shoe. The world is waiting for you to make your mark. [DONE]`,`(sophisticated_.jpg - #facbfb)\n\nThis cap is not just any ordinary cap; it's a statement piece that showcases your unique style. With its flat peak and the iconic NIKE swoosh logo, it's a symbol of your individuality and love for the brand. (efficient_1_.jpg - #d3c7eb)\n\nBut it's not just about style; it's about functionality too. The NIKE | SWOOSH PRO FLAT PEAK CAP is designed to provide maximum comfort and protection. Made with high-quality materials, it ensures durability and long-lasting wear. (high-quality_0_.jpg - #d2e7dd)\n\nWhat sets this cap apart from the rest is its customizable fit. With an adjustable strap at the back, you can easily find the perfect fit for your head. Whether you prefer a snug or loose fit, this cap has got you covered. (customizable_3_.jpg - #efd1f0)\n\nThe NIKE | SWOOSH PRO FLAT PEAK CAP comes in a classic white color, perfect for any outfit and occasion. Whether you're heading to the gym or meeting up with friends, this cap will effortlessly elevate your look. (white - #f2edf4)\n\nSo why wait? Step up your cap game with the NIKE | SWOOSH PRO FLAT PEAK CAP. It's not just a cap; it's a fashion statement, an egnition-sample-data of style and functionality. Embrace your inner fashionista and let your cap do the talking. (cap - #eafdc8) (egnition-sample-data - #e3caed) (nike - #efe3ed)\n\nIn a world where fashion is constantly evolving, the NIKE | SWOOSH PRO FLAT PEAK CAP is a timeless piece that will never go out of style. [DONE]`];
  let index = 0;
  return sampleText[2].replace(/(\([^()]+\))/g, (match) => {
    let replacement = match;

    
    if (legend.length > index) {
      const currentEntry = legend[index];

      if (Array.isArray(currentEntry) && currentEntry.length === 2) {
        const [label, value] = currentEntry;
        replacement = `${label} - ${value}`;
      }
    }
    // Use match if replacements array is exhausted
    // console.log("replacement: ", replacement);
    index++;

    return `(${replacement})`;
  });
}
// 









function writeJsonToFile(filePath, data) {
  try {
    // Convert the JavaScript object to a JSON string
    const jsonString = JSON.stringify(data, null, 2); // The third parameter (2) specifies the number of spaces for indentation

    // Write the JSON string to the file
    fs.writeFileSync(filePath, jsonString);

    console.log(`JSON data has been written to ${filePath}`);
  } catch (error) {
    console.error(`Error writing JSON to ${filePath}: ${error.message}`);
  }
}

// Example usage:


function readJsonFile(filePath) {
  try {
    // Read the content of the file
    const fileContent = fs.readFileSync(filePath, 'utf8');

    // Parse the JSON content into a JavaScript object
    const jsonData = JSON.parse(fileContent);

    console.log(`JSON data read from ${filePath}`);
    
    return jsonData;
  } catch (error) {
    // If the file doesn't exist or there is an error parsing the JSON
    console.error(`Error reading JSON from ${filePath}: ${error.message}`);
    return null;
  }
}

// Example usage:
// Example usage:

